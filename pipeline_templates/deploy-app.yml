parameters:
- name: environment
  type: string
- name: webAppName
  type: string
- name: appType
  type: string

steps:
  - task: DownloadBuildArtifacts@0
    inputs:
      buildType: "current"
      artifactName: "drop"
      downloadPath: "$(Build.SourcesDirectory)"
  - task: ExtractFiles@1
    inputs:
      archiveFilePatterns: "**/*.zip"
      destinationFolder: $(System.ArtifactsDirectory)/drop
      cleanDestinationFolder: true
  - task: AzureWebApp@1
    displayName: 'Azure Web App Deploy'
    inputs:
      azureSubscription: 'Pay-As-You-Go (fa8e018e-3a36-4104-ade8-7d8b267fe5b3)'
      appType: '${{ parameters.appType }}'
      appName: '${{ parameters.webAppName }}'
      package: '$(System.ArtifactsDirectory)/drop/*.zip'
      runtimeStack: 'NODE|10.10'
      startUpCommand: 'npm run start'