parameters:
- name: environment
  type: string
- name: webAppName
  type: string
- name: appType
  type: string
- name: runtimeStack
  type: string
  default: NODE|10.10
- name: serviceConnection
  type: string

steps:
  - task: AzureWebApp@1
    displayName: 'Azure Web App Deploy'
    inputs:
      azureSubscription: '${{ parameters.serviceConnection }}'
      appType: '${{ parameters.appType }}'
      appName: '${{ parameters.webAppName }}'
      package: '$(Agent.BuildDirectory)/drop/$(build.buildid).zip'
      runtimeStack: '${{ parameters.runtimeStack }}'
      startUpCommand: 'npm run start'